# nisum-technologies-users
 Prueba técnica Nisum Technologies (Ing. Elkin Daza)

 	PRUEBA TECNICA
	
	Framework: Spring Boot

	Características:

		* Spring Boot 2.5.6
		* Java 11
		* Gradle 7.2
		* JUnit 5
		* Mockito
		* Swagger Openapi 3.0.1
		* Base de datos H2 en Memoria
		
	Guía de instalación (Usando Eclipse 2020-09 como ejemplo)

		Menú File -> Import
			Existing gradle project -> Next		
				Seleccionar ruta de la carpeta del repositorio descargado en Project root directory -> Next
					En "Import options" dejar seleccionado Gradle wrapper y presionar Finish.
		
	Guía de pruebas:

		* Para correr JUnit:
			Realizar clic derecho sobre el proyecto y seleccionar Run as -> JUnit test
			
		* Para correr el microservicio
			Realizar clic derecho sobre el proyecto y seleccionar Run as -> Spring boot app

		* POSTMAN. Si desea, puede importar en Postman la colección "Nisun Technologies - postman_collection.json"
			Este contiene el endpoint solicitado en la prueba técnica.			
			
		* SWAGGER. Si desea probar desde swagger, puede correr en el navegador la ruta:
			http://localhost:8080/nisum-technologies-users/swagger-ui.html
			
		* Consola de H2. Se desea verificar los datos registrados en la Base de datos, puede dirigirse al siguiente link:
		    http://localhost:8080/nisum-technologies-users/h2-console/
			Allí diligenciamos solo los siguientes campos 
			Driver Class -> org.h2.Driver 
			JDBC URL -> jdbc:h2:mem:nisumdb
			User Name -> nisum
			

		Nota: En caso que desee probar los servicios con otra herramienta, proporciono la siguiente información

			Base path: http://localhost:8080
			Context path: /nisum-technologies-users
			
			Endpoints 		
				POST http://localhost:8080/nisum-technologies-users/users/register (Para el registro de usuarios)
				
			Base path: http://localhost:8080
			Context path: /nisum-technologies-users
			
			Endpoints 
			
				POST http://localhost:8080/nisum-technologies-users/users/register (Para el registro de usuarios)
				{
					"name":"Elkin Daza", 
					"email":"elkin@nisum.com",
					"password":"Pas123*",
					"phones": [
						{
							"number":"1234567",
							"citycode":"1",
							"countrycode":"57"
						}
					]
				}				
	
		Script BD:
	
		drop table if exists phone cascade;
		drop table if exists user cascade;

		create table phone (id bigint generated by default as identity,
		active BOOLEAN default true,
		created TIMESTAMP default CURRENT_TIMESTAMP,
		modified TIMESTAMP default CURRENT_TIMESTAMP,
		citycode varchar(255),
		countrycode varchar(255),
		number varchar(255),
		user_id binary,
		primary key (id));

		create table user (id binary not null,
		active BOOLEAN default true,
		created TIMESTAMP default CURRENT_TIMESTAMP,
		modified TIMESTAMP default CURRENT_TIMESTAMP,
		email varchar(255),
		last_login timestamp,
		name varchar(255),
		password varchar(255),
		token varchar(255),
		primary key (id));

		alter table user add constraint uk_email unique (email);
		alter table phone add constraint FKb0niws2cd0doybhib6srpb5hh foreign key (user_id) references user;